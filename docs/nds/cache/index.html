<!doctype html>
<html lang='tlh-Piqd'>
    <head>
        <title>NatrixHub</title>
        <meta charset='utf-8'/>

        <meta name='author' content='nat-rix'>
        <meta name='generator' content='zola'>
        <meta name='keywords' content='playground,github pages'>
        <meta name='referrer' content='no-referrer'>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="/fonts.css">
        <link rel="stylesheet" href="/style.css">
    </head>

    <body>
    <div id='global-bg'></div>
    <div class='global-card-container'>
        <div class='global-card'>
            <div class='navbar'>
                <a href='https:&#x2F;&#x2F;github.com&#x2F;nat-rix' class='navbar-item'>
                    <div class='display-flex'>
                        <img src='/images/github-mark.png'>
                        <span class='navbar-item-text'>Github Profile</span>
                    </div>
                </a>
                <a href='/nds' class='navbar-item'>
                    
                    <strong>
                    <div class='navbar-item-text'>NDS Wiki</div>
                    </strong>
                </a>
                <a href='/' class='navbar-item'>
                    
                    <div
                    class='navbar-item-text'>About Me
                    </div>
                </a>
            </div>
            <a href='/' class='page-title'>
                Natri<span class='title-rotating-x'>x</span>Hub
                <span class='blink-line-container'><span class='blink-line'></span></span>
            </a>
        </div>
    </div>
    <div class='global-card-container main-content'>
        <div class='global-card'>
            <hr class='line-separator' style='margin-bottom: 1cm'>
            <div class='content-card-container'>
                <div class='content-card'>
    <div class='markdown'><h1 id="processor-caches">Processor Caches</h1>
<p>Caching is only supported on the <a href="/nds/nds9">NDS9</a> processor.
The Nintendo DS supports two seperate caches (Harvard architecture),
the unified cache feature (von Neumann) is not supported. However, they
can be enabled and disabled each.</p>
<table><thead><tr><th></th><th>Instruction Cache</th><th>Data Cache</th></tr></thead><tbody>
<tr><td>Capacity</td><td>8 KiB</td><td>4 KiB</td></tr>
<tr><td>Configuration</td><td><a rel="noopener noreferrer" target="_blank" href="https://en.wikipedia.org/wiki/Cache_placement_policies#Set-associative_cache">4-way set associative</a></td><td><a rel="noopener noreferrer" target="_blank" href="https://en.wikipedia.org/wiki/Cache_placement_policies#Set-associative_cache">4-way set associative</a></td></tr>
<tr><td>Cache Line Size</td><td>8 Words / 32 Bytes</td><td>8 Words / 32 Bytes</td></tr>
<tr><td>Operations</td><td>Read</td><td>Read / Write</td></tr>
</tbody></table>
<p>Here are some variables defined by the <a href="/nds/links">ARM Architecture Reference Manual</a></p>
<table><thead><tr><th></th><th>Instruction Cache</th><th>Data Cache</th></tr></thead><tbody>
<tr><td>LINELEN</td><td>32</td><td>32</td></tr>
<tr><td>NSETS</td><td>64</td><td>32</td></tr>
<tr><td>ASSOCIATIVITY = NWAYS</td><td>4</td><td>4</td></tr>
</tbody></table>
<p style='text-align: center'>
<img src='&#x2F;images&#x2F;nds-cache.svg' alt='Data cache organisation' style='filter:invert(100%);' />

Fig 1. Data cache organisation
</p>
<h2 id="lockdown-functionality">Lockdown functionality</h2>
<p>Both the instruction cache and the data cache support the lockdown functionality.
It can be controlled by the following <a href="/nds/cp15">CP-15</a> registers</p>
<p><code>Cn=9,Cm=0,Op2=0, Data Cache Lockdown Register</code>,
<code>Cn=9,Cm=0,Op2=1, Instruction Cache Lockdown Register</code></p>
<pre style="background-color:#393939;color:#dedede;"><code><span>╭ 3 ╷         2         ╷         1         ╷         0         ╮
</span><span>┌─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┐
</span><span>│1│0│9│8│7│6│5│4│3│2│1│0│9│8│7│6│5│4│3│2│1│0│9│8│7│6│5│4│3│2│1│0│
</span><span>╞═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╪═╧═╡
</span><span>│L│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│-│WAY│
</span><span>└─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴───┘
</span></code></pre>
</div>
</div>
            </div>
        </div>
    </div>
</body>
</html>
